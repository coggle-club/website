<!-- 第三届“马栏山杯”国际音视频算法大赛 -->
<!-- 用户下一个观看视频预测 -->
<!-- 2022-8-25 -->
<!-- <a target="_blank" href="https://www.zhihu.com/people/ashui233/">阿水</a>, <a target="_blank" href="https://www.zhihu.com/people/wang-he-13-93">鱼遇雨欲语与余</a>-->
<!--  -->

## 赛题介绍

设法提高用户观看体验，是芒果TV平台的核心技术挑战之一，我们不断为此而努力！及时发现用户的兴趣和调整内容展示对于实现这一目标非常重要，在给定用户观影历史和上下文的行为的条件下，进行序列预测是一项非常重要且困难的推荐任务，本赛题将以此为背景，希望选手在真实样本数据集下建立出最优的序列预测模型。

赛题任务：根据大赛组织方提供的用户在芒果TV产生的行为，视频特征，标签特征等数据，构建模型，预测用户在芒果TV下一个时刻观看的视频。

比赛链接：[https://challenge.ai.mgtv.com/contest/detail/16](https://challenge.ai.mgtv.com/contest/detail/16)


## 赛题数据

- 用户视频观看行为

| 字段     | 说明                          | 示例                             | 数据类型 |
| -------- | ----------------------------- | -------------------------------- | -------- |
| did      | 用户设备id                    | e55947fb8d27288721bbaaf90aea4766 | string   |
| vid      | 视频id                        | 239fa8776d81792a7477053184e7d6af | string   |
| vts      | 用户观看vid的播放时长         | 20                               | int      |
| hb       | 用户最后一次观看vid的进度时长 | 50                               | int      |
| seq_no   | 用户观看视频行为的序列号      | 1                                | int      |
| time_gap | 距离上一次观看视频的时间间隔  | 30                               | int      |
| cpn      | 当前页面类型                  | 12                               | int      |
| fpn      | 上一次跳转页面类型            | 1                                | int      |

- 视频信息表

| 字段        | 说明           | 示例                                                  | 备注                          |
| ----------- | -------------- | ----------------------------------------------------- | ----------------------------- |
| vid         | 视频id         | 239fa8776d81792a7477053184e7d6af                      | string                        |
| cid         | 合集id         | 9f84a64963ac7f263f56168b9b0819dc                      | string                        |
| Is_intact   | 视频类型       | 1                                                     | int                           |
| serialno    | 集号           | 1                                                     | int                           |
| series_id   | 系列id         | 0                                                     | int                           |
| duration    | 视频时长       | 1200                                                  | int                           |
| title_len   | 标题长度       | 30                                                    | int                           |
| upgc_flag   | upgc标识       | 0/1                                                   | int                           |
| classify_id | 频道类型       | 3                                                     | int(表示电影，电视剧，动漫等) |
| stars       | 包含的明星集合 | [101000001, 101000002, 101000005, 101000004,........] | array                         |
| keywords    | 关键词         | [0,4,5,78,9]                                          | array                         |
| tags        | 视频标签集合   | [201000001, 301000002, 401000005, 201000004,........] | array                         |

- 候选视频表

| 字段 | 说明       | 示例                             | 备注   |
| ---- | ---------- | -------------------------------- | ------ |
| vid  | 候选视频id | 239fa8776d81792a7477053184e7d6af | string |

## 评估指标
1. 评估指标是MRR(https://en.wikipedia.org/wiki/Mean_reciprocal_rank)，将用户实际观看的视频排在更靠前的位置，将得到更高的分数。
2. 算力要求
- 物理内存不超过256G，显存使用不超过11G。
- 代码运行时间不超过24小时。未满足以上算力限制的参赛队伍，大赛官方有权将最终总成绩判定无效，排名由后一名依次递补。

每个did提交用户最有可能观看的6个视频，从高到低进行排序 

选手提交答案样例

| did  | vid   | rank |
| ---- | ----- | ---- |
| Did1 | Vid1  | 1    |
| Did1 | Vid3  | 2    |
| Did1 | Vid4  | 3    |
| Did1 | Vid7  | 4    |
| Did1 | Vid2  | 5    |
| Did1 | Vid5  | 6    |
| Did2 | Vid6  | 1    |
| Did2 | Vid7  | 2    |
| Did2 | Vid10 | 3    |
| Did2 | Vid32 | 4    |
| Did2 | Vid8  | 5    |
| Did2 | Vid9  | 6    |

请选手将测试集的预测结果按照上述文件样式进行提交上传，文件格式为csv，did列表示为用户，vid列表示用户下一个时刻观看的视频, rank是排序位置

## 比赛规则
1. 每支队伍每天限提交3次结果；
2. 比赛排行按照B榜最终得分从高到低排序（如出现相同分数，按照推理耗时从低到高排序）；
3. B榜赛程结束后，排名前10的队伍需要提交方案设计说明书、算法源代码。大赛官方组织专家进行审核和必要的沟通询问。
4. 为防止作弊行为，主办方保留了部分未公开数据用于校验方案，如遇作弊行为，将取消选手成绩。

## 奖项设置
- 冠军：人民币240,000元
- 亚军：人民币60,000元
- 季军：人民币27,000元
- 排名第4至10名：人民币5,000元

## 比赛排行榜

- A榜

| 排名    | 参赛队伍 | 分数 | 最佳成绩提交时间 | 提交次数   |
| ---- | ------------------------------------------------------------ | ------ | ------------------- | ---- |
| 1    | 刺猬的优雅 | 0.5312 | 2022/08/16 11:29:40 | 56   |
| 2    | 红与黑 | 0.5292 | 2022/08/16 11:05:29 | 58   |
| 3    | 天才儿童 | 0.5251 | 2022/08/14 08:31:29 | 33   |
| 4    | happiness | 0.5196 | 2022/08/16 11:35:17 | 31   |
| 5    | HAO | 0.5170 | 2022/08/10 12:49:32 | 34   |
| 6    | 魔王讨伐军 | 0.5158 | 2022/08/16 10:22:21 | 52   |
| 7    | ADAM第二次打比赛 | 0.5127 | 2022/08/16 01:17:29 | 15   |
| 8    | NaN | 0.5069 | 2022/08/15 12:55:01 | 46   |
| 9    | starry | 0.5062 | 2022/08/16 11:26:55 | 46   |
| 10   | mg187232377 | 0.5062 | 2022/08/14 00:55:30 | 15   |
| 11   | 找工作去了弃赛 | 0.5041 | 2022/07/03 11:25:10 | 21   |
| 12   | 请龙龙吃饭 | 0.5041 | 2022/07/22 12:18:53 | 36   |
| 13   | monkey | 0.5023 | 2022/08/16 00:17:03 | 16   |
| 14   | zhuhua2 | 0.4986 | 2022/08/07 19:49:30 | 8    |
| 15   | 去网吧里偷耳机 | 0.4979 | 2022/07/24 08:08:05 | 52   |
| 16   | mg739322882 | 0.4976 | 2022/08/06 09:41:07 | 5    |
| 17   | 魔王讨伐军放风筝团长 | 0.4974 | 2022/08/09 10:26:23 | 17   |
| 18   | 咋做啊 | 0.4923 | 2022/06/30 23:13:46 | 29   |
| 19   | 能摸到鱼吗 | 0.4906 | 2022/08/15 22:04:46 | 12   |
| 20   | 解散队伍没记录 | 0.4900 | 2022/08/16 10:29:53 | 5    |

- B榜

| 排名    | 参赛队伍 | 分数 | 最佳成绩提交时间 | 提交次数   |
| ---- | ------------------------------------------------------------ | ------ | ------------------- | ---- |
| 1    | 魔王讨伐军 | 0.5730 | 2022/08/19 09:48:40 | 52   |
| 2    | 刺猬的优雅 | 0.5658 | 2022/08/19 11:41:42 | 56   |
| 3    | 红与黑 | 0.5636 | 2022/08/19 11:52:18 | 58   |
| 4    | 天才儿童 | 0.5582 | 2022/08/19 08:52:21 | 33   |
| 5    | happiness | 0.5540 | 2022/08/18 22:39:29 | 31   |
| 6    | HAO | 0.5529 | 2022/08/19 11:51:16 | 34   |
| 7    | ADAM第二次打比赛 | 0.5486 | 2022/08/18 23:40:59 | 15   |
| 8    | monkey | 0.5440 | 2022/08/19 00:55:24 | 16   |
| 9    | 找工作去了弃赛 | 0.5413 | 2022/08/19 09:56:14 | 21   |
| 10   | NaN | 0.5406 | 2022/08/19 08:06:22 | 46   |
| 11   | mg311733127 | 0.5389 | 2022/08/19 11:18:02 | 3    |
| 12   | mg187232377 | 0.5388 | 2022/08/19 02:18:32 | 15   |
| 13   | 解散队伍没记录 | 0.5378 | 2022/08/19 11:52:19 | 5    |
| 14   | 能摸到鱼吗 | 0.5374 | 2022/08/19 11:23:22 | 12   |
| 15   | 请龙龙吃饭 | 0.5351 | 2022/08/18 17:49:46 | 36   |
| 16   | starry | 0.5339 | 2022/08/19 08:26:39 | 46   |
| 17   | 我要上分了 | 0.5338 | 2022/08/19 01:18:16 | 27   |
| 18   | mg538733jOA | 0.5204 | 2022/08/17 06:18:35 | 13   |
| 19   | 去网吧里偷耳机 | 0.5198 | 2022/08/17 14:23:56 | 52   |
| 20   | mg754927158 | 0.4998 | 2022/08/17 20:18:28 | 15   |

## Top分享

- Top7 赛后总结 ：[https://mp.weixin.qq.com/s/sXGYOp9g9XNrU-anKGMleQ](https://mp.weixin.qq.com/s/sXGYOp9g9XNrU-anKGMleQ)